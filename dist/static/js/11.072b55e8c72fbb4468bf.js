webpackJsonp([11],{QZVR:function(e,t){},Wd5l:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=[{dataIndex:"ruleLabel",title:"规则名称",ellipsis:!0,key:"ruleLabel"},{dataIndex:"subjectResource",title:"数据来源",ellipsis:!0,key:"subjectResource",scopedSlots:{customRender:"subjectResource"}},{title:"触发事件",dataIndex:"subjectEvent",key:"subjectEvent",ellipsis:!0,scopedSlots:{customRender:"subjectEvent"}},{title:"状态",dataIndex:"ruleStatus",key:"ruleStatus",ellipsis:!0,scopedSlots:{customRender:"ruleStatus"}},{title:"操作",key:"action",ellipsis:!0,scopedSlots:{customRender:"action"}}],s={name:"dataForwardingList",data:function(){return{data:[],columns:n,searchObj:{ruleLabel:""},eventArr:[{value:"DEVICE_CREATE",label:"设备创建"},{value:"DEVICE_UPDATE",label:"设备更新"},{value:"DEVICE_DELETE",label:"设备删除"},{value:"DEVICE_PROPERTY_REPORT",label:"设备属性上报"},{value:"DEVICE_MESSAGE_REPORT",label:"设备消息上报"},{value:"DEVICE_STATUS_UPDATE",label:"设备状态更改"},{value:"PRODUCT_CREATE",label:"产品创建"},{value:"PRODUCT_UPDATE,",label:"产品更新"},{value:"PRODUCT_DELETE",label:"产品删除"}],resourceArr:[{value:"DEVICE",label:"设备"},{value:"DEVICE_MESSAGE",label:"设备消息"},{value:"DEVICE_PROPERTY",label:"设备属性"},{value:"DEVICE_STATUS",label:"设备状态"},{value:"PRODUCT",label:"产品"}],pagination:{showLessItems:!0,pageSizeOptions:["10","20","30"],showSizeChanger:!0,pageSize:10,current:1,hideOnSinglePage:!1,total:0}}},created:function(){this.getList()},methods:{tableChange:function(e){this.pagination.pageSize=e.pageSize,this.pagination.current=e.current,this.pagination.total=e.total,this.getList()},getList:function(){var e=this,t={ruleLabel:this.searchObj.ruleLabel,page:this.pagination.current,pageSize:this.pagination.pageSize};this.$api.getForwardList(t).then(function(t){var a=t.data;e.pagination.total=a.total,e.pagination.pageSize=a.size,e.pagination.current=a.current;var n=a.records;e.data=n})},changeStatus:function(e){var t=this,a={forwardRuleId:e.id,status:!e.ruleStatus};this.$api.putForwardStatus(a).then(function(e){t.getList()})},deleteCancel:function(e){var t=this;this.$api.deleteForward(e).then(function(e){t.getList()})},showModal:function(){this.$router.push({path:"/dataForwardingAdd"})},onSearch:function(){this.getList()},goDetail:function(e){this.$router.push({path:"/dataForwardingDetails",query:{id:e}})},goDebug:function(){this.$router.push({path:"/online"})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),e._v(" "),a("div",{staticClass:"table-content"},[a("div",{staticClass:"table-title"},[a("a-button",{attrs:{type:"primary"},on:{click:e.showModal}},[a("a-icon",{attrs:{type:"plus"}}),e._v(" 创建规则")],1),e._v(" "),a("a-input-search",{staticStyle:{width:"200px",margin:"0 20px"},attrs:{allowClear:"",placeholder:"请输入规则名称搜索"},on:{blur:e.onSearch,search:e.onSearch},model:{value:e.searchObj.ruleLabel,callback:function(t){e.$set(e.searchObj,"ruleLabel",t)},expression:"searchObj.ruleLabel"}})],1),e._v(" "),a("div",{staticClass:"table-box"},[a("a-table",{attrs:{columns:e.columns,rowKey:function(e,t){return t},pagination:e.pagination,"data-source":e.data},on:{change:e.tableChange},scopedSlots:e._u([{key:"subjectResource",fn:function(t){return a("span",{},e._l(e.resourceArr,function(n,s){return n.value===t?a("span",{key:s},[e._v("\n            "+e._s(n.label)+"\n          ")]):e._e()}),0)}},{key:"subjectEvent",fn:function(t){return a("span",{},e._l(e.eventArr,function(n,s){return n.value===t?a("span",{key:s},[e._v("\n            "+e._s(n.label)+"\n          ")]):e._e()}),0)}},{key:"ruleStatus",fn:function(t){return a("span",{},[a("span",t?[a("span",{staticClass:"device-status",style:{background:"#15C937"}}),e._v("\n             已启动\n          ")]:[a("span",{staticClass:"device-status",style:{background:"#C91521"}}),e._v("\n            停止\n          ")])])}},{key:"action",fn:function(t,n){return a("span",{},[a("span",{staticClass:"table-btn",on:{click:function(t){return e.goDetail(n.id)}}},[e._v("详情")]),e._v(" "),a("span",{staticClass:"table-btn",on:{click:function(t){return e.changeStatus(n)}}},[n.ruleStatus?a("span",[e._v("停止")]):a("span",[e._v("启动")])]),e._v(" "),a("a-popconfirm",{attrs:{title:"你确定删除此规则吗?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(t){return e.deleteCancel(n.id)}}},[a("span",{staticClass:"table-btn"},[e._v(" 删除 ")])])],1)}}])})],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"home-title"},[t("span",[this._v("数据转发")])])}]};var i=a("C7Lr")(s,l,!1,function(e){a("QZVR")},"data-v-574ae2f2",null);t.default=i.exports}});
//# sourceMappingURL=11.072b55e8c72fbb4468bf.js.map