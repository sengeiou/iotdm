{"version":3,"sources":["webpack:///src/pages/dataForwarding/dataForwardingList.vue","webpack:///./src/pages/dataForwarding/dataForwardingList.vue?adbc","webpack:///./src/pages/dataForwarding/dataForwardingList.vue"],"names":["columns","dataIndex","title","ellipsis","key","scopedSlots","customRender","dataForwardingList","name","data","searchObj","ruleLabel","eventArr","value","label","resourceArr","pagination","showLessItems","pageSizeOptions","showSizeChanger","pageSize","current","hideOnSinglePage","total","created","this","getList","methods","tableChange","_this","pageOption","page","$api","getForwardList","then","res","resData","size","resRecords","records","changeStatus","val","_this2","obj","forwardRuleId","id","status","ruleStatus","putForwardStatus","deleteCancel","_this3","deleteForward","showModal","$router","push","path","onSearch","goDetail","query","goDebug","dataForwarding_dataForwardingList","render","_vm","_h","$createElement","_c","_self","_m","_v","staticClass","attrs","type","on","click","staticStyle","width","margin","allowClear","placeholder","blur","search","model","callback","$$v","$set","expression","rowKey","record","index","data-source","change","_u","fn","text","_l","item","_s","_e","style","background","$event","ok-text","cancel-text","confirm","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.072b55e8c72fbb4468bf.js","sourcesContent":["<template>\n  <div>\n    <div class=\"home-title\">\n      <span>数据转发</span>\n    </div>\n    <div class=\"table-content\">\n      <div class=\"table-title\">\n        <a-button type=\"primary\" @click=\"showModal\"> <a-icon type=\"plus\"/> 创建规则</a-button>\n        <a-input-search allowClear @blur=\"onSearch\" v-model=\"searchObj.ruleLabel\" @search=\"onSearch\" style=\"width: 200px; margin: 0 20px\" placeholder=\"请输入规则名称搜索\" />\n      </div>\n      <div class=\"table-box\">\n        <a-table :columns=\"columns\"\n                 @change=\"tableChange\"\n                 :rowKey=\"(record, index) => {return index}\"\n                 :pagination=\"pagination\"\n                 :data-source=\"data\">\n          <span slot=\"subjectResource\" slot-scope=\"text\">\n            <span v-for=\"(item, index) in resourceArr\" :key=\"index\" v-if=\"item.value === text\">\n              {{item.label}}\n            </span>\n          </span>\n          <span slot=\"subjectEvent\" slot-scope=\"text\">\n            <span v-for=\"(item, index) in eventArr\" :key=\"index\" v-if=\"item.value === text\">\n              {{item.label}}\n            </span>\n          </span>\n          <span slot=\"ruleStatus\" slot-scope=\"text\">\n            <span v-if=\"text\">\n              <span class=\"device-status\" :style=\"{background: '#15C937'}\"></span>\n               已启动\n            </span>\n            <span v-else>\n              <span class=\"device-status\" :style=\"{background: '#C91521'}\"></span>\n              停止\n            </span>\n          </span>\n          <span slot=\"action\" slot-scope=\"text, record\">\n        <span class=\"table-btn\" @click=\"goDetail(record.id)\">详情</span>\n        <span class=\"table-btn\" @click=\"changeStatus(record)\">\n          <span v-if=\"record.ruleStatus\">停止</span>\n          <span v-else>启动</span>\n          </span>\n          <a-popconfirm\n            title=\"你确定删除此规则吗?\"\n            ok-text=\"确定\"\n            cancel-text=\"取消\"\n            @confirm=\"deleteCancel(record.id)\"\n          >\n         <span class=\"table-btn\"> 删除 </span>\n       </a-popconfirm>\n    </span>\n        </a-table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst columns = [\n  {\n    dataIndex: 'ruleLabel',\n    title: '规则名称',\n    ellipsis: true,\n    key: 'ruleLabel'\n  },\n  {\n    dataIndex: 'subjectResource',\n    title: '数据来源',\n    ellipsis: true,\n    key: 'subjectResource',\n    scopedSlots: { customRender: 'subjectResource' }\n  },\n  {\n    title: '触发事件',\n    dataIndex: 'subjectEvent',\n    key: 'subjectEvent',\n    ellipsis: true,\n    scopedSlots: { customRender: 'subjectEvent' }\n  },\n  {\n    title: '状态',\n    dataIndex: 'ruleStatus',\n    key: 'ruleStatus',\n    ellipsis: true,\n    scopedSlots: { customRender: 'ruleStatus' }\n  },\n  {\n    title: '操作',\n    key: 'action',\n    ellipsis: true,\n    scopedSlots: { customRender: 'action' }\n  }\n]\n\nexport default {\n  name: 'dataForwardingList',\n  data () {\n    return {\n      data: [],\n      columns,\n      searchObj: {\n        ruleLabel: ''\n      },\n      eventArr: [\n        {\n          value: 'DEVICE_CREATE',\n          label: '设备创建'\n        },\n        {\n          value: 'DEVICE_UPDATE',\n          label: '设备更新'\n        },\n        {\n          value: 'DEVICE_DELETE',\n          label: '设备删除'\n        },\n        {\n          value: 'DEVICE_PROPERTY_REPORT',\n          label: '设备属性上报'\n        },\n        {\n          value: 'DEVICE_MESSAGE_REPORT',\n          label: '设备消息上报'\n        },\n        {\n          value: 'DEVICE_STATUS_UPDATE',\n          label: '设备状态更改'\n        },\n        {\n          value: 'PRODUCT_CREATE',\n          label: '产品创建'\n        },\n        {\n          value: 'PRODUCT_UPDATE,',\n          label: '产品更新'\n        },\n        {\n          value: 'PRODUCT_DELETE',\n          label: '产品删除'\n        }\n      ],\n      resourceArr: [\n        {\n          value: 'DEVICE',\n          label: '设备'\n        },\n        {\n          value: 'DEVICE_MESSAGE',\n          label: '设备消息'\n        },\n        {\n          value: 'DEVICE_PROPERTY',\n          label: '设备属性'\n        },\n        {\n          value: 'DEVICE_STATUS',\n          label: '设备状态'\n        },\n        {\n          value: 'PRODUCT',\n          label: '产品'\n        }\n      ],\n      pagination: {\n        showLessItems: true,\n        pageSizeOptions: ['10', '20', '30'],\n        showSizeChanger: true,\n        pageSize: 10,\n        current: 1,\n        hideOnSinglePage: false,\n        total: 0\n      }\n    }\n  },\n  created() {\n    this.getList()\n  },\n  methods: {\n    /**\n     * 切换分页\n     * */\n    tableChange(pagination) {\n      this.pagination.pageSize = pagination.pageSize\n      this.pagination.current = pagination.current\n      this.pagination.total = pagination.total\n      this.getList()\n    },\n    /**\n     * 获取设备列表\n     * */\n    getList() {\n      const pageOption = {\n        ruleLabel: this.searchObj.ruleLabel,\n        page: this.pagination.current,\n        pageSize: this.pagination.pageSize\n      }\n      this.$api.getForwardList(pageOption).then(res => {\n        const resData = res.data\n        console.log('设备数据', res)\n        this.pagination.total = resData.total\n        this.pagination.pageSize = resData.size\n        this.pagination.current = resData.current\n        const resRecords = resData.records\n        this.data = resRecords\n      })\n    },\n    /**\n     * 修改规则状态\n     * */\n    changeStatus(val) {\n      const obj = {\n        forwardRuleId: val.id,\n        status: !val.ruleStatus\n      }\n      this.$api.putForwardStatus(obj).then(res => {\n        this.getList()\n      })\n    },\n    /**\n     * 删除规则\n     * */\n    deleteCancel(id) {\n      this.$api.deleteForward(id).then(res => {\n        this.getList()\n      })\n    },\n    showModal() {\n      this.$router.push({path: '/dataForwardingAdd'})\n    },\n    onSearch() {\n      this.getList()\n    },\n    goDetail (id) {\n      this.$router.push({\n        path: '/dataForwardingDetails',\n        query: {\n          id: id\n        }\n      })\n    },\n    goDebug() {\n      this.$router.push({path: '/online'})\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.product-info {\n  background: #ffffff;\n  margin: 24px;\n  .product-content {\n    padding: 24px;\n    color: #8a8e99;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/dataForwarding/dataForwardingList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"table-content\"},[_c('div',{staticClass:\"table-title\"},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.showModal}},[_c('a-icon',{attrs:{\"type\":\"plus\"}}),_vm._v(\" 创建规则\")],1),_vm._v(\" \"),_c('a-input-search',{staticStyle:{\"width\":\"200px\",\"margin\":\"0 20px\"},attrs:{\"allowClear\":\"\",\"placeholder\":\"请输入规则名称搜索\"},on:{\"blur\":_vm.onSearch,\"search\":_vm.onSearch},model:{value:(_vm.searchObj.ruleLabel),callback:function ($$v) {_vm.$set(_vm.searchObj, \"ruleLabel\", $$v)},expression:\"searchObj.ruleLabel\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"table-box\"},[_c('a-table',{attrs:{\"columns\":_vm.columns,\"rowKey\":function (record, index) {return index},\"pagination\":_vm.pagination,\"data-source\":_vm.data},on:{\"change\":_vm.tableChange},scopedSlots:_vm._u([{key:\"subjectResource\",fn:function(text){return _c('span',{},_vm._l((_vm.resourceArr),function(item,index){return (item.value === text)?_c('span',{key:index},[_vm._v(\"\\n            \"+_vm._s(item.label)+\"\\n          \")]):_vm._e()}),0)}},{key:\"subjectEvent\",fn:function(text){return _c('span',{},_vm._l((_vm.eventArr),function(item,index){return (item.value === text)?_c('span',{key:index},[_vm._v(\"\\n            \"+_vm._s(item.label)+\"\\n          \")]):_vm._e()}),0)}},{key:\"ruleStatus\",fn:function(text){return _c('span',{},[(text)?_c('span',[_c('span',{staticClass:\"device-status\",style:({background: '#15C937'})}),_vm._v(\"\\n             已启动\\n          \")]):_c('span',[_c('span',{staticClass:\"device-status\",style:({background: '#C91521'})}),_vm._v(\"\\n            停止\\n          \")])])}},{key:\"action\",fn:function(text, record){return _c('span',{},[_c('span',{staticClass:\"table-btn\",on:{\"click\":function($event){return _vm.goDetail(record.id)}}},[_vm._v(\"详情\")]),_vm._v(\" \"),_c('span',{staticClass:\"table-btn\",on:{\"click\":function($event){return _vm.changeStatus(record)}}},[(record.ruleStatus)?_c('span',[_vm._v(\"停止\")]):_c('span',[_vm._v(\"启动\")])]),_vm._v(\" \"),_c('a-popconfirm',{attrs:{\"title\":\"你确定删除此规则吗?\",\"ok-text\":\"确定\",\"cancel-text\":\"取消\"},on:{\"confirm\":function($event){return _vm.deleteCancel(record.id)}}},[_c('span',{staticClass:\"table-btn\"},[_vm._v(\" 删除 \")])])],1)}}])})],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home-title\"},[_c('span',[_vm._v(\"数据转发\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-574ae2f2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/dataForwarding/dataForwardingList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-574ae2f2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./dataForwardingList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./dataForwardingList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./dataForwardingList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-574ae2f2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./dataForwardingList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-574ae2f2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/dataForwarding/dataForwardingList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}